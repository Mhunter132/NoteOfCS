# 第一章进程与线程的基本概念

## 1.1 进程产生背景

串行处理指令效率很低，容易产生阻塞，故cpu使用时间片轮训的方式来提高效率。cpu时间片的提出使的并发成为可能

> 切换进程会保存当前进程（进程标识符，进程使用的资源）

Q:多进程也可以实现并发，为什么用线程实现

A: 线程系统开销小

进程和线程的区别

- 显著区别就是线程共享内存分配的资源，进程独享进程资源，但不绝对，有些嵌入式操作系统进程是共享资源
- 进程是OS基本分配单位，而线程是OS基本调度单位

## 1.2 上下文切换

上下文切换：是指cpu从一个进程(线程)切换到下一个进程(线程)

上下文(context)：某一时间点CPU寄存器和程序计数器的内容

寄存器：是cpu内部的少量的速度很快的闪存，通常存储和访问计算过程的中间值提高计算机程序的运行速度。

程序计数器：是一个专用的寄存器，用于表明指令序列中 CPU 正在执行的位置，存的值为正在执行的指令的位置或者下一个将要被执行的指令的位置，具体实现依赖于特定的系统。

Hints：上下文切换通常是计算密集型的，意味着此操作会**消耗大量的 CPU 时间，故线程也不是越多越好**。如何减少系统中上下文切换次数，是提升多线程性能的一个重点课题。

***

多线程状态：

	1. 新建状态
 	2. 就绪状态：线程创建完，其他线程调用了start()方法。该线程就位于“可运行线程池”中，等待cpu的使用。
 	3. 运行状态：cpu执行
 	4. 阻塞状态：放弃cpu使用权
     - 等待阻塞：调用wait()方法，释放资源，无法自动唤醒，需要其他线程调用，notify()、notifyall()方法
     - 同步阻塞：同步锁被其他的锁占用，进入“锁池”
     - 其他阻塞：使用sleep方法或者join方法
	5. 死亡状态：线程退出run方法