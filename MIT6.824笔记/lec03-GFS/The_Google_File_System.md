# The Google File System

## 摘要

我们设计和实现了谷歌文件系统，一种高扩展的，分布式的数据密集型的分布式文件系统，可以在便宜的商业计算机上提供容错机制，能发挥大量客户端的（data-intentive）分布式性能。

​		与之前分享的很多有相同功能的分布式文件系统对比，我们的设计驱动着我们目前所能看到的工作（workload）和技术环境，包括现的和以后计划的项目。这也标志性的反映出早期文件系统的 淘汰（departure），也促使我们审视（re-examine）传统的选择从根本上探索不同的设计点。

​		这个文件系统成功的满足了我们w'd存储的需求，它被广泛的应用应用于谷歌内部的存储平台，提供生成和处理数据等服务，例如：搜索和敏捷开发所需要的大量数据集。最大的数据集群使用数千硬盘提供数百T的存储，部署在数千太计算机上，允许数百个客户端同时访问。

​		在该论文中，我们提出文件系统接口扩展设计支持分布式应用，多方面讨论我们的设计，汇报（micro-benchmark）基准测试和真实世界的使用情况。

# 一般术语

设计，可靠性，性能，测量单位

# 关键词

容错，扩展性，数据存储，集群存储

# 1. 介绍

​	我们完成了谷歌文件系统的设计和实现进而满足谷歌快速增长的数据处理需求。与之前分享的很多有相同功能的分布式文件系统对比，我们的设计驱动着我们目前所能看到的工作（workload）和技术环境，包括现的和以后计划的项目。这也标志性的反映出早期文件系统的淘汰，也促使我们审视（re-examine）传统的选择从根本上探索不同的设计点。

​	首先，组件失败是一种不被期望(不想看到的)的指标，文件系统包括上百数千的计算机，部署在便宜的商业机上，允许大量的客户端访问。实际上组件的质量和数量也保证了在某些时刻是无法工作的，并且有些并不会从失败中恢复过来。我们碰到过，应用本身的bugs,操作系统bugs，人的操作错误，磁盘损坏，内存，连接，网络和电能供应的错误，因此，持续监控，错误诊断（dectection），容错，自动恢复等都必须集成到系统中。（**总结：大型系统要有监控，错误诊断，容错机制，自动恢复机制**）

​	第二，传统文件是很大的，上GB是很正常的每个文件实际上都包含了很多系统的对象（application objects，引申翻译成内容感觉更贴切），例如web文档，当我们经常处理由大约数十亿个对象组成的许多TBs的快速增长的数据集时，管理这些大约KB大小的文件是愚蠢的，即使文件系统能支持这个数据量，这样做的结果就是（管理大文件），像设计论证和参数，例如I/O操作和块（block）大小不得不重新设计（**总结：大文件要切割**）

​	第三，大部分文件会通过在后面追加写的操作而不是重写来改变，随机写文件是不存在的，一点写文件，该文件就只有读权限。且文件内容是连续的。各种特征的数据，有些可能有分析分析程序扫描组成的存储区，有些可能是程序运行时数据流持续产生的，有些可能是归档文件，有些可能是产生的中间结果，或是其他进程产生的，是否同时或者稍后产生的，都给予了大文件访问方式，追加方式给hi也成为了性能优化关注的焦点和原子操作保证。（**总结：原子性的追加写操作**）

​	第四，协同设计的程序（分布式）和文件系统API对增加我们所有系统的灵活性是有益的（**总结：文件API能增加系统灵活性**）

​	例如，这个大型简单的文件系统有相对松散的GFS's模型，没有繁重负担。我们也早已经介绍了这个系统的追加写的原子性操作以至于多客户端能够并发执行追加写操作，他们之间没有额外的同步锁。这个细节会在论文后面详细讨论。

​	目前部署GFS集群有多种目的，最大集群有1K+的节点。超过300TB的硬盘，上百客户端持续性重度访问

# 2.设计概览

## 2.1 假设

在设计文件系统需求阶段，假设带来的挑战和机遇引导着我们。我们会稍微提到早期重要的观察，然后现在罗列我们假设细节

- 系统由那些便宜的很容易损坏的商业机构成，他必须能持续监控和诊断自己。容错，以一种路由原则从失败的组件当中快速恢复的
- 系统存储适度问文件，我们有上百万的文件，每个大小是100MB,或者更大，GB级文件时很常见的情况，应该被有效管理。小文件也要有效管理，但是我们不需要优化它。
- 两种方式读文件组成主要工作量：大型流式读文件和小型随机读文件，每次大的流式读文件实际上读**几百KBs**，通常是1M或者更多，来自同一客户端的连续操作通常会读取文件的连续区域。小型随机读实际上是在随机位置读取kbs数据，注重性能的应用程序经常批处理，并对读取的小数据排序，而不是来回移动。
- 其中还包括很多的大的，连续的追加写操作，事实上，和读操作大小相似。支持在文件随机（arbitrary）位置,并非一定是高效。
- 系统必须为多用户并发追加写操作实现well语义定义，我们的文件通常被用来作为生产者-消费者队列或者合并，上百的生产者跑在一台物理机上，并发的追加写操作。